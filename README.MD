# ğŸš— Professional Car Image Editor with AI Beautifier v2.0

EditeazÄƒ profesional imagini cu maÈ™ini folosind AI avansatÄƒ È™i procesare GPU optimizatÄƒ.

## ğŸš€ Features

- âœ… **Advanced AI Segmentation** - U2Net pentru extragere profesionalÄƒ
- âœ… **AI Beautifier cu ControlNet + Stable Diffusion**
  - ğŸ¨ Vopsea lucioasÄƒ cu reflexii mirror-like
  - ğŸ§¹ Eliminare automatÄƒ pete È™i imperfecÈ›iuni
  - âœ¨ Reflexii soft È™i efecte profesionale
  - ğŸ­ Multiple stiluri: glossy, matte, metallic, luxury
  - ğŸŒˆ Generare variaÈ›ii de culoare automatÄƒ
- âœ… **Professional Backgrounds** - showroom, studio, gradient, urban
- âœ… **Smart Enhancement Levels** - light, medium, strong
- âœ… **GPU Optimization** - Memory management È™i fallback automat
- âœ… **Professional Compositing** - umbre realiste È™i reflexii
- âœ… **Branding Integration** - logo overlay personalizabil

## ğŸ“‹ Prerequisites

- Docker
- NVIDIA GPU cu driver instalat (opÈ›ional, funcÈ›ioneazÄƒ È™i pe CPU)
- nvidia-docker2 sau Docker 19.03+ cu suport GPU

## ğŸ› ï¸ Installation

1. CloneazÄƒ sau dezarhiveazÄƒ proiectul:
```bash
unzip car-image-editor.zip
cd car-image-editor
```

2. RuleazÄƒ setup:
```bash
chmod +x setup.sh
./setup.sh
```

## ğŸ® Usage

### Quick Start:
```bash
./scripts/run.sh
```

### Advanced Usage:
```bash
# Professional glossy finish
./scripts/run.sh -i input/car.jpg -b showroom --ai-style glossy --ai-level medium

# Luxury metallic with studio background
./scripts/run.sh -i input/car.jpg -b studio --ai-style luxury --ai-level strong

# Generate color variations
./scripts/run.sh --colors red,blue,black,white,silver,gold

# Disable AI for traditional processing
./scripts/run.sh --disable-ai --enhance

# Custom background
./scripts/run.sh -b custom --custom-bg my_background.jpg
```

### Command Line Options:
```bash
./scripts/run.sh [OPTIONS]

Options:
  -i, --input FILE        Input car image (default: input/car.jpg)
  -o, --output FILE       Output image path (default: output/edited.jpg)
  -b, --background TYPE   Background: showroom, studio, gradient, urban, custom
  --custom-bg FILE        Custom background image
  --ai-style STYLE        AI style: glossy, matte, metallic, luxury
  --ai-level LEVEL        AI level: light, medium, strong
  --disable-ai            Disable AI beautification
  --colors COLORS         Generate color variations (comma-separated)
  --logo-text TEXT        Logo text (default: 'Forecast AUTO')
  --no-logo               Disable logo overlay
  --enhance               Apply additional enhancement
  --quality N             JPEG quality 70-100 (default: 95)
  -v, --verbose           Verbose output
  --build                 Force rebuild Docker image
  -h, --help              Show help
```

### Direct Python Usage:
```bash
# Basic processing
python3 src/main.py --input input/car.jpg

# Advanced AI processing
python3 src/main.py \
    --input input/car.jpg \
    --output output/enhanced.jpg \
    --background showroom \
    --ai-style luxury \
    --ai-level strong \
    --color-variations red,blue,black,white
```

## ğŸ¤– AI Beautifier Features

### ğŸ¨ Stiluri Disponibile:
- **Glossy** - Vopsea lucioasÄƒ cu reflexii mirror-like
- **Matte** - Finisaj mat elegant È™i sofisticat  
- **Metallic** - Vopsea metalicÄƒ cu efecte pearl
- **Luxury** - Finisaj premium de calitate showroom

### ğŸ“Š Nivele de Enhancement:
- **Light** - ÃmbunÄƒtÄƒÈ›iri subtile, aspect natural
- **Medium** - Enhancement echilibrat (recomandat)
- **Strong** - ÃmbunÄƒtÄƒÈ›iri dramatice, finisaj perfect

### ğŸŒˆ Color Variations:
GenereazÄƒ automat variaÈ›ii de culoare pentru aceeaÈ™i maÈ™inÄƒ:
- Red, Blue, Black, White, Silver, Gold
- MenÈ›ine calitatea È™i stilul original
- SalveazÄƒ fiecare variaÈ›ie separat

### ğŸ¯ Caracteristici AI:
- ğŸ”§ **Fallback automat** la metode tradiÈ›ionale dacÄƒ AI nu e disponibil
- ğŸ§¹ **Memory management** inteligent pentru GPU
- ğŸ¨ **ControlNet integration** pentru control precis
- âœ¨ **Professional effects** - eliminare pete, reflexii soft, vopsea lucioasÄƒ
- ğŸš€ **GPU optimization** cu XFormers È™i attention slicing

## ğŸ¨ Background Options

- **showroom** - Fundal showroom profesional cu reflexii pe podea
- **studio** - Fundal studio neutru cu iluminare profesionalÄƒ
- **gradient** - Fundal gradient radial elegant
- **urban** - Fundal urban modern (Ã®n dezvoltare)
- **custom** - FoloseÈ™te propriul fundal cu `--custom-bg path/to/bg.jpg`

## ğŸ§ª Testing & Demo

### Test AI Beautifier:
```bash
python3 test_ai_beautifier.py
```

### Comprehensive Demo:
```bash
python3 demo_comprehensive.py
```

### Quick Tests:
```bash
# Test different styles
./scripts/test_ai_beautifier.sh

# Run all tests
./scripts/run_test.sh
```

## ğŸ“ Project Structure

```
â”œâ”€â”€ src/                    # Core source code
â”‚   â”œâ”€â”€ main.py            # Enhanced main interface
â”‚   â”œâ”€â”€ car_editor.py      # Professional car editor
â”‚   â”œâ”€â”€ ai_beautifier.py   # AI beautification engine
â”‚   â””â”€â”€ ...
â”œâ”€â”€ input/                 # Input images
â”œâ”€â”€ output/                # Generated results
â”œâ”€â”€ scripts/               # Enhanced scripts
â”‚   â”œâ”€â”€ run.sh            # Main execution script
â”‚   â”œâ”€â”€ test_ai_beautifier.sh
â”‚   â””â”€â”€ ...
â”œâ”€â”€ demo_comprehensive.py  # Full feature demo
â”œâ”€â”€ test_ai_beautifier.py # AI testing suite
â””â”€â”€ README.MD             # This file
```

## âš™ï¸ Configuration

EditeazÄƒ `config.yaml` pentru:
- Parametri AI Beautifier
- SetÄƒri GPU È™i memory management
- Configurare enhancement
- Parametri de procesare

## ğŸ”§ Advanced Features

### Memory Management:
- Automatic GPU memory cleanup
- CPU fallback pentru sisteme fÄƒrÄƒ GPU
- Optimized model loading È™i unloading

### Professional Compositing:
- Realistic shadow generation
- Floor reflections pentru showroom
- Professional lighting effects
- Film grain È™i color grading

### Quality Control:
- Multiple quality levels (70-100)
- Professional sharpening
- Color balance adjustment
- Edge refinement

## ğŸ› Troubleshooting

### Quick Diagnosis:
```bash
# Run the debug script to identify issues
./scripts/debug_run.sh

# Test basic functionality without Docker
python3 test_simple.py
```

### Common Issues:

1. **Script execution errors:**
   ```bash
   # Make scripts executable
   chmod +x scripts/*.sh
   
   # Clear environment variables
   unset INPUT_FILE OUTPUT_FILE BACKGROUND
   
   # Run from project root directory
   cd /path/to/claude-forecastauto
   ./scripts/run.sh
   ```

2. **Missing input image:**
   ```bash
   # Add a car image to input directory
   cp your_car_image.jpg input/car.jpg
   
   # Or specify custom input
   ./scripts/run.sh -i path/to/your/car.jpg
   ```

3. **Docker issues:**
   ```bash
   # Check Docker installation
   docker --version
   docker compose version
   
   # Build the image
   docker compose build car-editor
   
   # Check GPU support
   nvidia-smi
   docker run --rm --gpus all nvidia/cuda:11.8.0-base-ubuntu22.04 nvidia-smi
   ```

4. **Out of memory:**
   ```bash
   # Use CPU-only mode
   ./scripts/run.sh --disable-ai
   
   # Or reduce enhancement level
   ./scripts/run.sh --ai-level light
   ```

5. **AI models not loading:**
   ```bash
   # Check internet connection for model download
   # Or use traditional enhancement
   ./scripts/run.sh --disable-ai --enhance
   ```

6. **Permission denied:**
   ```bash
   chmod +x scripts/*.sh
   chmod -R 755 input output
   ```

### Debug Tools:
- `./scripts/debug_run.sh` - Comprehensive system check
- `python3 test_simple.py` - Quick functionality test
- `./scripts/run.sh -h` - Show all available options
- `./scripts/run.sh -v` - Verbose output for debugging

## ğŸ“Š Performance

- **GPU Processing**: 15-30s per image (depending on complexity)
- **CPU Fallback**: 45-90s per image
- **Memory Usage**: 4-8GB VRAM (GPU) / 8-16GB RAM (CPU)
- **Quality**: Professional automotive photography standard

## ğŸ¯ Use Cases

- **Automotive Dealerships** - Professional car photography
- **Online Marketplaces** - Enhanced vehicle listings
- **Marketing Materials** - High-quality promotional images
- **Social Media** - Eye-catching car content
- **Personal Projects** - Beautify your car photos

## ğŸ“ License

MIT License

## ğŸ¤ Contributing

Contributions welcome! Please read the contributing guidelines and submit pull requests.

## ğŸ“ Support

For support and questions:
- Check the troubleshooting section
- Review the demo scripts
- Submit issues on GitHub

---
Made with â¤ï¸ for Forecast AUTO - Professional Car Image Enhancement
